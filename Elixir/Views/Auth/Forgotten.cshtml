@model Elixir.Models.ForgottenPassword
@{
    ViewBag.Title = "Forgotten password";
    Layout = "~/Views/Shared/_LayoutPublic.cshtml";
}

@section Scripts
{
    @Scripts.Render("~/Scripts/App/leaveDirtyForm.js")
}

@section Styles
{
    @Styles.Render("~/Styles/Components/Controls/Inputs.css")
}

<h1 class="head-title">Forgotten password</h1>

@if (Request.IsAuthenticated)
{
    <div class="row mt-2">
        <div class="col-12">
            <p class="page-description">You are already logged in - please use your <a href="/account">account</a> page to change your password.</p>
        </div>
    </div>
}
else
{
    if (TempData["ForgottenPasswordSuccessMsg"] != null)
    {
        <div class="alert alert-success">
            @TempData["ForgottenPasswordSuccessMsg"].ToString()
        </div>
    }
    else
    {
        <div class="row mt-2">
            <div class="col-12">
                <p class="page-description">Please enter your email address to be sent a link to reset your password.</p>
            </div>
        </div>

        using (Html.BeginForm("Forgotten", "Auth", FormMethod.Post))
        {
            @Html.ValidationSummary(true)
            <div class="form-group row">
                <div class="col-6">
                    @Html.LabelFor(x => x.EmailAddress, "Email address", new { @class = "col-form-label" })
                    @Html.EditorFor(x => x.EmailAddress, new { htmlAttributes = new { @class = "form-control", @autofocus = "" } })
                    @Html.ValidationMessageFor(x => x.EmailAddress)
                </div>
            </div>
            <div class="form-group row">
                <div class="col-6">
                    <input type="submit" id="btnResetPassword" class="btn btn-primary" value="Reset password" />
                </div>
            </div>
        }
    }
}